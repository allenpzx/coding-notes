#### 手写实现一些方法

**instanceof**

```javascript
function _instanceof(left, right) {
  if (left.__proto__ === null || left.__proto__ === undefined) return false;
  return left.__proto__ === right.prototype
    ? true
    : _instanceof(left.__proto__, right);
}
```

**new**

```javascript
function factory(fn, ...args) {
  let o = {};
  o.__proto__ = fn.prototype;
  fn.call(o, ...args);
  return o;
}
```

**call**

```javascript
Function.prototype._call = function(context, ...args) {
  if (typeof this !== "function") {
    throw new TypeError(
      "Function.prototype._call - what is trying to be bound is not callable"
    );
  }
  const ctx = context || window;
  ctx.fn = this;
  const result = ctx.fn(...args);
  delete ctx.fn;
  return result;
};
```

**apply**

```javascript
Function.prototype._apply = function(context, ...args) {
  if (typeof this !== "function") {
    throw new TypeError(
      "Function.prototype._apply - what is trying to be bound is not callable"
    );
  }
  const ctx = context || window;
  ctx.fn = this;
  const result = ctx.fn(...args[0]);
  delete ctx.fn;
  return result;
};
```

**bind**

```javascript
Function.prototype._bind = function(context, ...args) {
  const ctx = context || window;
  const _this = this;
  function fn() {}
  function result(...argus) {
    return _this.apply(this instanceof result ? this : ctx, [
      ...args,
      ...argus
    ]);
  }
  if (this.prototype) {
    fn.prototype = this.prototype;
  }
  result.prototype = new fn();
  return result;
};
```

**flat**

```javascript
function _flat(arr) {
    let _arr = arr.reduce((prev, curr) => {
        return Array.isArray(curr) ? prev.concat(_flat(curr)) : prev.concat(curr)
    }, [])

    let s = new Set(_arr)
    return [...s]
}
```
