## å¼‚æ­¥å¹¶å‘

éœ€æ±‚æ˜¯ðŸ‘‡çˆ¬å–`task`é‡Œé¢idçš„è¯¦æƒ…é¡µæ•°æ®

```javascript
    {
        ...
        task: ['id1', 'id2', ...]
        ...
    }
```

å…ˆçœ‹åŒæ­¥çˆ¬å–æ€Žä¹ˆåšï¼Œå¾ˆæ˜Žæ˜¾ðŸ‘‡çš„åšæ³•æ•ˆçŽ‡å¾ˆä½Žï¼Œå› ä¸ºè¦ä¸€ä¸ªçˆ¬å–å®Œæˆä¹‹åŽä¸‹ä¸€ä¸ªæ‰å¯ä»¥å¼€å§‹çˆ¬å–ã€‚

```javascript
for(const task of tasks) {
    await someAsyncFn(task)
}
```

å†çœ‹å¼‚æ­¥çˆ¬å–æ€Žä¹ˆåšï¼Œå¾ˆæ˜Žæ˜¾ðŸ‘‡çš„åšæ³•æ•ˆçŽ‡é«˜ï¼Œä½†`task`æ•°ç»„è¶³å¤Ÿé•¿çš„è¯ï¼Œå¯èƒ½ä¼šè¢«é”ipï¼Œå’ŒæœåŠ¡å™¨å†…å­˜ðŸ’¥ï¼Œæ‰€ä»¥æœ‰é™åˆ¶çš„å¼‚æ­¥å¹¶å‘çˆ¬å–æ˜¯æ•ˆçŽ‡æœ€é«˜çš„ã€‚

```javascript
const pendings = task.map(v => someAsyncFn(v));
await Promise.all(pendings)
```

æœ€ç»ˆè§£å†³æ–¹æ³•ðŸ‘‡

```javascript
const mapList: IMapList = (tasks, limit, handle) => {
    const loop = (list) => {
        return handle(list.shift()).then(() => {
            if(list.length !== 0) return loop(list)
            return Promise.resolve();
        })
    }
    const _tasks = tasks.slice();
    const pendings = [];
    while(limit--) {
        pendings.push(loop(_tasks))
    }
    await Promise.all(pendings);
}
```
